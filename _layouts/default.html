---
theme :
  name : dbyll
---
{% include default.html %}

{% if site.google_analytics %}
<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl =
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', '{{ site.google_analytics }}']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

<script src="/javascripts/fpCollect.min.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', async function() {
        const fingerprint = await fpCollect.generateFingerprint();
        const xhr = new XMLHttpRequest();

        // xhr.onreadystatechange = function() {
        //     if (xhr.readyState === 4 && xhr.status === 200){
        //
        //     }
        // };

        xhr.open('POST', '/bots/collectblogfp');
        xhr.setRequestHeader('Content-Type', 'application/json');
        // This uuid is not for tracking. A new one is generated at each request. It is to link HTTP headers
        // and a fingerprint
        // The fingerprints are collected for research purposes
        fingerprint.url = window.location.href;
        xhr.send(JSON.stringify(fingerprint));
    });
</script>

{% endif %}
